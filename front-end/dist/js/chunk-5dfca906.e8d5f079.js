(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5dfca906"],{"50d5":function(t,a,e){},"727b":function(t,a,e){"use strict";var s=e("50d5"),o=e.n(s);o.a},ae8d:function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"container"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-block"},[t._t("default",[t._v("NO CONTENT")])],2)])])])},o=[],r={},n=r,c=e("2877"),l=Object(c["a"])(n,s,o,!1,null,null,null);a["a"]=l.exports},c6c6:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("card",[e("div",{staticClass:"card-title"},[e("div",{staticClass:"text-center"},[t._v("\n        Seja bem-vindo, "+t._s(t.nomeCompleto)+"\n        "),e("div",{staticClass:"break inline"},[t._v("|")]),t._v("\n        Você já economizou R$"+t._s(t.credit.toFixed(2))+"\n      ")])])]),e("card",[e("span",{staticClass:"card-title text-center"},[t._v(t._s(t.items.length>0?"Você possui "+t.items.length+" compra"+(t.items.length>1?"s":"")+" registrada"+(t.items.length>1?"s":""):"Você não possui nenhuma compra registrada"))]),e("div",{staticClass:"break"}),e("span",{staticClass:"card-actions"},[e("button",{staticClass:"card-button blue-button",on:{click:t.getSells}},[t._v("Atualizar lista")]),e("div",{staticClass:"card-spacing"}),e("button",{staticClass:"card-button",on:{click:t.newSell}},[t._v("Cadastrar compra")])])]),e("card",{staticClass:"mb-3"},[e("responsive-table",{attrs:{caption:"Sumário do Período",items:t.items}})],1)],1)},o=[],r=e("ae8d"),n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"center"},[t.items.length>0?e("table",[e("caption",[t._v(t._s(t.caption))]),t._m(0),e("tbody",{staticClass:"striped"},t._l(t.items,(function(a){return e("tr",[e("td",{attrs:{"data-label":"Código"}},[t._v(t._s(a.sellid))]),e("td",{attrs:{"data-label":"Data"}},[t._v(t._s(t.moment(a.date).format("DD/MM/YYYY")))]),e("td",{attrs:{"data-label":"Valor"}},[t._v("R$"+t._s((a.price||0).toFixed(2)))]),e("td",{attrs:{"data-label":"Cashback"}},[t._v("R$"+t._s((a.cashbackvalue||0).toFixed(2))+" ("+t._s(a.cashbackpercentage)+"%)")]),e("td",{attrs:{"data-label":"Status"}},[t._v(t._s(a.status.description))]),e("td",{attrs:{"data-label":"Ações"}},[e("div",[e("button",{staticClass:"table-button blue-button-solid mr-1",on:{click:function(e){return t.editSell(a.id)}}},[t._v("Editar")]),e("button",{staticClass:"table-button red-button-solid",on:{click:function(e){return t.showDeleteMessage(a.id)}}},[t._v("Deletar")])])])])})),0)]):e("div",[e("h2",{staticClass:"grey"},[t._v("Não encontramos registros para exibir")])])])},c=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",{attrs:{scope:"col"}},[t._v("Código")]),e("th",{attrs:{scope:"col"}},[t._v("Data")]),e("th",{attrs:{scope:"col"}},[t._v("Valor")]),e("th",{attrs:{scope:"col"}},[t._v("Cashback")]),e("th",{attrs:{scope:"col"}},[t._v("Status")]),e("th",{attrs:{scope:"col"}},[t._v("Ações")])])])}],l=e("bc3a"),i=e.n(l),d={props:["caption","items"],methods:{editSell(t){this.$router.push({path:`/compras/editar/${t}`})},async showDeleteMessage(t){await this.$swal.fire({title:"Você tem certeza?",text:"Você não poderá reverter esta ação!",type:"warning",showCancelButton:!0,customClass:{confirmButton:"confirm-button-class",cancelButton:"cancel-button-class"},confirmButtonText:"Sim",cancelButtonText:"Cancelar"}).then(async a=>{a.value&&(await this.deleteSell(t),this.$swal.fire("Apagado!","Seu registro foi apagado.","success").then(t=>{window.location.reload()}))})},async deleteSell(t){await i.a.delete(`/sells/${t}`).catch(t=>{console.error({err:t}),localStorage.setItem("logout_error",t.response.data.name),this.$parent.logout()})}}},u=d,h=e("2877"),p=Object(h["a"])(u,n,c,!1,null,null,null),m=p.exports,b={components:{Card:r["a"],ResponsiveTable:m},data:()=>{return{isLoadingBro:!1,items:[],credit:0}},methods:{newSell(){this.$router.push("/compras/cadastrar")},async getSells(){let t=new Promise(async(t,a)=>{await i.a.get("/sells").then(a=>{this.items=a.data||[],t()}).catch(t=>{localStorage.setItem("logout_error",t.response.data.name),this.$parent.$parent.logout(),a(t)}),this.$parent.$parent.showLoading(!1)});return await t},async getCashback(){let t=new Promise(async(t,a)=>{await i.a.get(`/cashback/${localStorage.getItem("user_id")}`).then(a=>{this.credit=a.data.credit,t()}).catch(t=>{localStorage.setItem("logout_error",t.response.data.name),this.$parent.$parent.logout(),a(t)}),this.$parent.$parent.showLoading(!1)});return await t}},beforeMount(){this.nomeCompleto=localStorage.getItem("full_name"),this.$parent.$parent.showLoading(!0),Promise.all([this.getSells(),this.getCashback()]),console.info({breadcrumbs:this.$route})}},v=b,_=(e("727b"),Object(h["a"])(v,s,o,!1,null,null,null));a["default"]=_.exports}}]);
//# sourceMappingURL=chunk-5dfca906.e8d5f079.js.map